<div class="card">
    <h4 class="card-header">{{ pageTitle }}</h4>
    <div class="card-body">
        <form novalidate (ngSubmit)="onSubmit()" [formGroup]="form">
            <div class="form-group row">
                <label class="col-md-3 col-form-label" for="firstNameId">First Name:* </label>
                <div class="col-md-8">
                    <input class="form-control" id="firstNameId" type="text" formControlName="firstName"
                        [ngClass]="{'is-invalid': displayMessage.firstName}" />
                    <span class="invalid-feedback">
                        {{ displayMessage.firstName}}
                    </span>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 col-form-label" for="lastNameId">Last Name:* </label>
                <div class="col-md-8">
                    <input class="form-control" id="lastNameId" type="text" formControlName="lastName"
                        [ngClass]="{'is-invalid': displayMessage.lastName}" />
                    <span class="invalid-feedback">
                        {{ displayMessage.lastName }}
                    </span>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 col-form-label" for="emailId">Email Address:* </label>
                <div class="col-md-8">
                    <input class="form-control" id="emailId" type="email" formControlName="email"
                        [ngClass]="{'is-invalid': displayMessage.email}" />
                    <span class="invalid-feedback">
                        {{ displayMessage.email }}
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 bg-light mt-3 mb-3 pt-3 pb-3">
                <h6>Enter your old password and choose a new one</h6>
            </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 col-form-label" for="oldPasswordId">Old Password: </label>
                <div class="col-md-8">
                    <input  class="form-control" 
                            id="oldPasswordId" 
                            [type]="passwordInputType" 
                            formControlName="oldPassword"
                            [ngClass]="{'is-invalid': displayMessage.oldPassword}" />
                    <span class="invalid-feedback">
                        {{ displayMessage.oldPassword }}
                    </span>
                </div>
            </div>
            <div formGroupName="passwordGroup">
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="newPasswordId">New Password:{{required}} </label>
                    <div class="col-md-8">
                        <input  class="form-control" 
                                id="newPasswordId" 
                                [type]="passwordInputType"
                                formControlName="newPassword"
                                [ngClass]="{'is-invalid': displayMessage.newPassword}" />
                        <span class="invalid-feedback">
                            {{ displayMessage.newPassword }}
                        </span>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="confirmNewPasswordId">Confirm New Password:{{required}} </label>
                    <div class="col-md-8">
                        <div class="flexContainer">
                            <input  class="form-control" 
                                    id="confirmNewPasswordId" 
                                    [type]="passwordInputType" 
                                    formControlName="confirmNewPassword" 
                                    [ngClass]="{'is-invalid': displayMessage.confirmNewPassword  || displayMessage.passwordGroup }" />
                            <button class="btn btn-outline-secondary" type="button" title="Show password" (click)="showPassword()">{{passwordToggleMessage}}</button>
                        </div> 

                        <span class="invalid-feedback d-block">
                            {{ displayMessage.confirmNewPassword }} {{ displayMessage.passwordGroup  }}
                        </span>
                        <span class="password-description">
                            Your password must contain at least 1 digit, 1 uppercase letter, and 1 lowercase letter and must be a minimum of 8 characters
                        </span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="offset-md-3 col-md-4">
                    <button class="btn btn-primary" 
                            type="submit"
                            [title]="form.valid ? 'Save your entered data' : 'Disabled until form data is valid'"
                            [disabled]="!form.valid || loading">
                            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                        Publish
                    </button>
                    <a routerLink="/user-account/my-adverts" class="btn btn-link">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>